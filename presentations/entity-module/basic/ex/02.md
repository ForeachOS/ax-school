## Oefening 1
### Manueel controls aanmaken
        
* Je kunt alle properties selecteren door EntityPropertySelector.of("*") te gebruiken. Specifieke properties kan natuurlijk ook.
* Je kunt gemakkelijk een EntityViewElementBatch aanmaken via de EntityViewElementBuilderHelper
* Om een batch te renderen moet je:
** de ViewElementMode selecteren
** de properties selecteren waarvoor je controls wilt
(optioneel) de specifieke entity toewijzen om property values op te halen
* Probeer zeker het effect tussen verschillende ViewElementModes
* Een batch genereert een gesorteerde map van property name/control builder; je kunt eventueel een ContainerViewElement gebruiken om de properties als één element door te geven
** De volgorde van de map keys wordt bepaald door de EntityPropertySelector. 
----
### Tips en opmerkingen
* Je kunt alle properties selecteren door EntityPropertySelector.of("*") te gebruiken. Specifieke properties kan natuurlijk ook.
* Je kunt gemakkelijk een EntityViewElementBatch aanmaken via de EntityViewElementBuilderHelper
* Om een batch te renderen moet je:
** de ViewElementMode selecteren
** de properties selecteren waarvoor je controls wilt
** (optioneel) de specifieke entity toewijzen om property values op te halen
* Probeer zeker het effect tussen verschillende ViewElementModes
* Een batch genereert een gesorteerde map van property name/control builder; je kunt eventueel een ContainerViewElement gebruiken om de properties als één element door te geven
** De volgorde van de map keys wordt bepaald door de EntityPropertySelector.

* Default control types worden bepaald aan de hand van annotaties:
** Zo is naam een textarea met autosize ipv een textbox door het ontbreken van een @Length.
** Email is geen gewone textbox maar een email input, door de aanwezigheid van @Email.
** Ticket type is een speciale bootstrap select, de javascript webresources zijn automatisch toegevoegd.
** @NotNull en @NotBlank validaties zorgen ervoor dat een control als required aangeduide wordt.
** Validatie fouten worden automatisch teruggekoppeld aan de juiste form control.
* De labels voor ticket type zijn weg, omdat builders een eigen message code resolving systeem gebruiken. Als je message codes toevoegt met de juiste prefix komen ze weer goed.
** Je kunt manueel een short-hand prefix voor modules configureren.
* Je kunt het type beïnvloeden op het moment van builden (builderHint), door het customizen van de configuratie (zie later) of door de default registratie te beïnvloeden (validatie annotaties)
* De gegenereerde view elements krijgen intern een name toegewezen.
* Eigenlijk mogen nu de manuele resources helemaal weg uit de layout

### Relevante documentatie

*  [EntityViewElementBatch](https://across-docs.foreach.be/across-site/production/entity-module/3.2.0/property-controls/creating-a-property-control/generating-controls-for-properties.html)
*  [Enum config](https://across-docs.foreach.be/across-site/production/entity-module/3.2.0/registering-entities/enums-as-entities.html)

----

### Oplossing

Booking controller:

```java
@GetMapping
String bookingForm(@ModelAttribute("booking") Booking booking, Model model) {
    ContainerViewElement container = new ContainerViewElement();
    EntityViewElementBatch<Booking> batch = entityViewElementBuilderHelper.createBatchForEntity(booking);
    batch.setPropertySelector(EntityPropertySelector.of("name", "email", "ticketType", "created", "numberOfTickets"));
    batch.setViewElementMode(ViewElementMode.FORM_WRITE);
    container.addChildren(batch.build().values());

    model.addAttribute("container", container);

    return "th/booking/frontend/bookingForm";
}
```

BookingForm template:
```java
<across:view element="${container}" />
```