## Oefening 5: custom Validator
### Default entity views configureren
        
* Dezelfde seat mag geen twee keer toegewezen worden. 
Los van ticketType is elk seat number uniek. 
Een mooie foutboodschap moet getoond worden en aanpasbaar zijn via de message codes.


   
----
### Tips en opmerkingen
* Een Spring Validator implementatie wordt automatisch opgepikt als die in dezelfde module zit als de entity.
* Een custom validator zou de default (annotatie validatie) vervangen, je kunt EntityValidatorSupport gebruiken als base class om bijkomende validatie te doen.


### Relevante documentatie

*  [Customizing entity validation ](https://across-docs.foreach.be/across-site/production/entity-module/3.2.0/customizing-entities/index.html#_customizing_entity_validation)
----

### Oplossing

```java
@Component
@RequiredArgsConstructor
public class SeatValidator extends EntityValidatorSupport<Seat> {
    private final SeatRepository seatRepository;

    @Override
    protected void postValidation(Seat entity, Errors errors, Object... validationHints) {
        if (!errors.hasFieldErrors("seatNumber")) {
            Seat existingSeat = seatRepository.findBySeatNumber(entity.getSeatNumber());

            if (existingSeat != null && !existingSeat.getId().equals(entity.getId())) {
                errors.rejectValue("seatNumber", "invalid");
            }
        }
    }

    @Override
    public boolean supports(Class<?> clazz) {
        return Seat.class.isAssignableFrom(clazz);
    }
}
```